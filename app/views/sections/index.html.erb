<% @page_title = "Articles" %>

<%= link_to("<< Back to Menu", {:controller => 'access', :action => 'index'}, :class => 'back-link') %>
<%= link_to("Subjects", {:controller => 'subjects', :action => 'index'}, :class => 'back-link') %>
<%= link_to("Pages", {:controller => 'pages', :action => 'index', :subject_id => @page.subject_id}, :class => 'back-link') %>

<div class="sections index">
  <h2>Articles</h2>
  
  <div class="text-center"><%= pluralize(@sections.size, 'article') %> found</div>

  <div class="new"><%= link_to("Add New Article", {:action => 'new', :page_id => @page.id, :page_id => @page.id}, :class => 'action') %></div>

  <div class="table-responsive">
    <table class="table table-bordered" summary="Article list">
      <tr class="header">
        <th>&nbsp;</th>
        <th>Page</th>
        <th>Article</th>
        <th>Content Type</th>
        <th>Visible</th>
        <th>Featured</th>
        <th>Actions</th>
      </tr>
      <% @sections.each do |section| %>
      <tr class="<%= cycle('odd', 'even') %>">
        <td><%= section.position %></td>
        <td><%= section.page.name if section.page %></td>
        <td><%= section.name %></td>
        <td><%= section.content_type %></td>
        <td class="text-center"><%= status_tag(section.visible) %></td>
        <td class="text-center"><%= status_tag(section.featured) %></td>
        <td class="actions">
          <%= link_to("Show", {:action => 'show', :id => section.id, :page_id => @page.id}, :class => 'action show') %>
          <%= link_to("Edit", {:action => 'edit', :id => section.id, :page_id => @page.id}, :class => 'action edit') %>
          <%= link_to("Delete", {:action => 'delete', :id => section.id, :page_id => @page.id}, :class => 'action delete') %>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>
