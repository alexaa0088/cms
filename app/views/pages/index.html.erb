<% @page_title = "Pages" %>

<%= link_to("<< Back to Menu", {:controller => 'access', :action => 'index'}, :class => 'back-link') %>
<%= link_to("Subjects", {:controller => 'subjects', :action => 'index'}, :class => 'back-link') %>

<div class="pages index">
  <h2>Pages</h2>
  
  <div class="text-center"><%= pluralize(@pages.size, 'page') %> found</div>

  <div class="new"><%= link_to("Add New Page", {:action => 'new', :subject_id => @subject.id}, :class => 'action') %></div>

  <div class="table-responsive">
    <table class="table table-bordered" summary="Page list">
      <tr class="header">
        <th>&nbsp;</th>
        <th>Subject</th>
        <th>Page</th>
        <th>Permalink</th>
        <th>Visible</th>
        <th>Articles</th>
        <th>Actions</th>
      </tr>
      <% @pages.each do |page| %>
      <tr class="<%= cycle('odd', 'even') %>">
        <td><%= page.position %></td>
        <td><%= page.subject.name if page.subject %></td>
        <td><%= page.name %></td>
        <td><%= page.permalink %></td>
        <td class="text-center"><%= status_tag(page.visible) %></td>
        <td class="text-center"><%= page.sections.size %></td>
        <td class="actions">
          <%= link_to("View Articles", {:controller => 'sections', :page_id => page.id}, :class => 'action show') %>
          <%= link_to("Show", {:action => 'show', :id => page.id, :subject_id => @subject.id}, :class => 'action show') %>
          <%= link_to("Edit", {:action => 'edit', :id => page.id, :subject_id => @subject.id}, :class => 'action edit') %>
          <%= link_to("Delete", {:action => 'delete', :id => page.id, :subject_id => @subject.id}, :class => 'action delete') %>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>
